import Plugin from '@ckeditor/ckeditor5-core/src/plugin';
import ButtonView from '@ckeditor/ckeditor5-ui/src/button/buttonview';
import { insertAccordionElement } from './utils';
import './styles/accordion.css';
import RemoveAccordionCommand from './removeAccordion';

export default class RemoveAccordionUI extends Plugin {
    init() {
        const editor = this.editor;
        /*initilize the event to remove accordion*/
        editor.commands.add('removeAccordion', new RemoveAccordionCommand(editor));

        editor.ui.componentFactory.add('removeAccordionPlugin', (locale) => {
            const view = new ButtonView(locale);
            const removeCommand = RemoveAccordionCommand;
            const toremove = `<svg id="svg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="400" height="336.8421052631579" viewBox="0, 0, 400,336.8421052631579"><g id="svgg"><path id="path0" d="M33.024 16.512 L 33.024 33.024 16.512 33.024 L 0.000 33.024 0.000 63.858 L 0.000 94.693 16.512 94.693 L 33.024 94.693 33.024 115.080 C 33.024 135.243,33.032 135.468,33.698 135.468 C 34.148 135.468,34.372 135.692,34.372 136.142 C 34.372 136.810,34.597 136.816,63.858 136.816 C 93.120 136.816,93.345 136.810,93.345 136.142 C 93.345 135.692,93.569 135.468,94.019 135.468 C 94.685 135.468,94.693 135.243,94.693 115.080 L 94.693 94.693 115.080 94.693 C 135.243 94.693,135.468 94.685,135.468 94.019 C 135.468 93.569,135.692 93.345,136.142 93.345 C 136.810 93.345,136.816 93.120,136.816 63.858 C 136.816 34.597,136.810 34.372,136.142 34.372 C 135.692 34.372,135.468 34.148,135.468 33.698 C 135.468 33.032,135.243 33.024,115.080 33.024 L 94.693 33.024 94.693 16.512 L 94.693 0.000 63.858 0.000 L 33.024 0.000 33.024 16.512 M327.548 5.897 L 327.548 11.794 317.776 11.794 C 308.228 11.794,308.003 11.810,308.003 12.468 C 308.003 12.918,307.779 13.142,307.329 13.142 C 306.671 13.142,306.655 13.367,306.655 23.083 L 306.655 33.024 296.714 33.024 C 286.998 33.024,286.773 33.040,286.773 33.698 C 286.773 34.148,286.549 34.372,286.099 34.372 C 285.441 34.372,285.425 34.597,285.425 44.145 L 285.425 53.917 275.653 53.917 C 266.105 53.917,265.880 53.933,265.880 54.591 C 265.880 55.041,265.656 55.265,265.206 55.265 C 264.548 55.265,264.532 55.490,264.532 65.206 L 264.532 75.147 254.591 75.147 C 244.875 75.147,244.650 75.163,244.650 75.821 C 244.650 76.271,244.426 76.495,243.976 76.495 C 243.318 76.495,243.302 76.720,243.302 86.268 L 243.302 96.040 233.530 96.040 C 223.982 96.040,223.757 96.056,223.757 96.714 C 223.757 97.164,223.533 97.388,223.083 97.388 C 222.425 97.388,222.409 97.613,222.409 107.329 L 222.409 117.270 212.468 117.270 C 202.752 117.270,202.527 117.286,202.527 117.944 C 202.527 118.394,202.303 118.618,201.853 118.618 C 201.195 118.618,201.179 118.843,201.179 128.391 L 201.179 138.163 191.407 138.163 C 181.859 138.163,181.634 138.179,181.634 138.837 C 181.634 139.287,181.410 139.511,180.960 139.511 C 180.302 139.511,180.286 139.736,180.286 149.452 L 180.286 159.393 170.345 159.393 C 160.629 159.393,160.404 159.409,160.404 160.067 C 160.404 160.517,160.180 160.741,159.730 160.741 C 159.072 160.741,159.056 160.966,159.056 170.514 L 159.056 180.286 149.284 180.286 C 139.736 180.286,139.511 180.302,139.511 180.960 C 139.511 181.410,139.287 181.634,138.837 181.634 C 138.179 181.634,138.163 181.859,138.163 191.575 L 138.163 201.516 128.222 201.516 C 118.506 201.516,118.281 201.532,118.281 202.190 C 118.281 202.565,118.057 202.864,117.776 202.864 C 117.338 202.864,117.270 204.175,117.270 212.637 L 117.270 222.409 107.329 222.409 C 97.613 222.409,97.388 222.425,97.388 223.083 C 97.388 223.533,97.164 223.757,96.714 223.757 C 96.056 223.757,96.040 223.982,96.040 233.698 L 96.040 243.639 86.099 243.639 C 76.383 243.639,76.158 243.655,76.158 244.313 C 76.158 244.688,75.934 244.987,75.653 244.987 C 75.215 244.987,75.147 246.298,75.147 254.760 L 75.147 264.532 65.206 264.532 C 55.490 264.532,55.265 264.548,55.265 265.206 C 55.265 265.656,55.041 265.880,54.591 265.880 C 53.933 265.880,53.917 266.105,53.917 275.821 L 53.917 285.762 44.145 285.762 C 34.597 285.762,34.372 285.778,34.372 286.436 C 34.372 286.886,34.148 287.110,33.698 287.110 C 33.032 287.110,33.024 287.335,33.024 306.150 C 33.024 324.965,33.032 325.190,33.698 325.190 C 34.148 325.190,34.372 325.414,34.372 325.864 C 34.372 326.522,34.597 326.537,44.145 326.537 L 53.917 326.537 53.917 331.761 L 53.917 336.984 74.305 336.984 L 94.693 336.984 94.693 331.761 L 94.693 326.537 104.634 326.537 C 114.350 326.537,114.575 326.522,114.575 325.864 C 114.575 325.414,114.799 325.190,115.249 325.190 C 115.907 325.190,115.922 324.965,115.922 315.249 L 115.922 305.307 125.695 305.307 C 135.243 305.307,135.468 305.292,135.468 304.634 C 135.468 304.184,135.692 303.960,136.142 303.960 C 136.800 303.960,136.816 303.735,136.816 294.187 L 136.816 284.414 146.757 284.414 C 156.473 284.414,156.698 284.399,156.698 283.741 C 156.698 283.291,156.922 283.067,157.372 283.067 C 158.030 283.067,158.045 282.842,158.045 273.126 L 158.045 263.184 167.818 263.184 C 177.366 263.184,177.591 263.169,177.591 262.511 C 177.591 262.061,177.815 261.837,178.265 261.837 C 178.923 261.837,178.939 261.612,178.939 252.064 L 178.939 242.291 188.880 242.291 C 198.596 242.291,198.821 242.276,198.821 241.618 C 198.821 241.243,199.045 240.944,199.326 240.944 C 199.764 240.944,199.832 239.614,199.832 231.003 L 199.832 221.061 209.773 221.061 C 219.489 221.061,219.714 221.046,219.714 220.388 C 219.714 219.938,219.938 219.714,220.388 219.714 C 221.046 219.714,221.061 219.489,221.061 209.941 L 221.061 200.168 231.003 200.168 C 240.719 200.168,240.944 200.153,240.944 199.495 C 240.944 199.120,241.168 198.821,241.449 198.821 C 241.887 198.821,241.955 197.491,241.955 188.880 L 241.955 178.939 262.342 178.939 C 282.505 178.939,282.730 178.931,282.730 178.265 C 282.730 177.815,282.954 177.591,283.404 177.591 C 284.070 177.591,284.078 177.366,284.078 157.203 L 284.078 136.816 294.019 136.816 C 303.735 136.816,303.960 136.800,303.960 136.142 C 303.960 135.692,304.184 135.468,304.634 135.468 C 305.292 135.468,305.307 135.243,305.307 125.695 L 305.307 115.922 315.080 115.922 C 324.628 115.922,324.853 115.907,324.853 115.249 C 324.853 114.799,325.077 114.575,325.527 114.575 C 326.185 114.575,326.201 114.350,326.201 104.634 L 326.201 94.693 336.142 94.693 C 345.858 94.693,346.083 94.677,346.083 94.019 C 346.083 93.569,346.307 93.345,346.757 93.345 C 347.415 93.345,347.430 93.120,347.430 83.572 L 347.430 73.799 357.203 73.799 C 366.751 73.799,366.976 73.784,366.976 73.126 C 366.976 72.676,367.200 72.452,367.650 72.452 C 368.308 72.452,368.324 72.227,368.324 62.511 L 368.324 52.570 378.265 52.570 C 387.981 52.570,388.206 52.554,388.206 51.896 C 388.206 51.446,388.430 51.222,388.880 51.222 C 389.546 51.222,389.553 50.997,389.553 32.182 C 389.553 13.367,389.546 13.142,388.880 13.142 C 388.430 13.142,388.206 12.918,388.206 12.468 C 388.206 11.810,387.981 11.794,378.265 11.794 L 368.324 11.794 368.324 5.897 L 368.324 0.000 347.936 0.000 L 327.548 0.000 327.548 5.897 M160.404 33.698 C 160.404 34.148,160.180 34.372,159.730 34.372 C 159.062 34.372,159.056 34.597,159.056 63.858 C 159.056 93.120,159.062 93.345,159.730 93.345 C 160.180 93.345,160.404 93.569,160.404 94.019 C 160.404 94.689,160.629 94.693,200.674 94.693 C 240.719 94.693,240.944 94.689,240.944 94.019 C 240.944 93.644,241.168 93.345,241.449 93.345 C 241.887 93.345,241.955 92.034,241.955 83.572 L 241.955 73.799 251.896 73.799 C 261.612 73.799,261.837 73.784,261.837 73.126 C 261.837 72.676,262.061 72.452,262.511 72.452 C 263.177 72.452,263.184 72.227,263.184 53.412 C 263.184 34.597,263.177 34.372,262.511 34.372 C 262.061 34.372,261.837 34.148,261.837 33.698 C 261.837 33.027,261.612 33.024,211.120 33.024 C 160.629 33.024,160.404 33.027,160.404 33.698 M371.019 54.591 C 371.019 55.041,370.795 55.265,370.345 55.265 C 369.679 55.265,369.671 55.490,369.671 74.305 C 369.671 93.120,369.679 93.345,370.345 93.345 C 370.795 93.345,371.019 93.569,371.019 94.019 C 371.019 94.682,371.244 94.693,385.510 94.693 L 400.000 94.693 400.000 74.305 L 400.000 53.917 385.510 53.917 C 371.244 53.917,371.019 53.928,371.019 54.591 M286.773 138.837 C 286.773 139.287,286.549 139.511,286.099 139.511 C 285.433 139.511,285.425 139.736,285.425 158.551 C 285.425 177.366,285.433 177.591,286.099 177.591 C 286.549 177.591,286.773 177.815,286.773 178.265 C 286.773 178.933,286.998 178.939,316.428 178.939 C 345.858 178.939,346.083 178.933,346.083 178.265 C 346.083 177.815,346.307 177.591,346.757 177.591 C 347.423 177.591,347.430 177.366,347.430 158.551 C 347.430 139.736,347.423 139.511,346.757 139.511 C 346.307 139.511,346.083 139.287,346.083 138.837 C 346.083 138.169,345.858 138.163,316.428 138.163 C 286.998 138.163,286.773 138.169,286.773 138.837 M350.126 138.837 C 350.126 139.287,349.902 139.511,349.452 139.511 C 348.786 139.511,348.778 139.736,348.778 158.551 C 348.778 177.366,348.786 177.591,349.452 177.591 C 349.902 177.591,350.126 177.815,350.126 178.265 C 350.126 178.923,350.351 178.939,359.899 178.939 L 369.671 178.939 369.671 188.880 C 369.671 198.596,369.687 198.821,370.345 198.821 C 370.795 198.821,371.019 199.045,371.019 199.495 C 371.019 200.158,371.244 200.168,385.510 200.168 L 400.000 200.168 400.000 169.166 L 400.000 138.163 375.063 138.163 C 350.351 138.163,350.126 138.170,350.126 138.837 M371.019 202.190 C 371.019 202.640,370.795 202.864,370.345 202.864 C 369.677 202.864,369.671 203.089,369.671 232.350 C 369.671 261.612,369.677 261.837,370.345 261.837 C 370.795 261.837,371.019 262.061,371.019 262.511 C 371.019 263.174,371.244 263.184,385.510 263.184 L 400.000 263.184 400.000 232.350 L 400.000 201.516 385.510 201.516 C 371.244 201.516,371.019 201.527,371.019 202.190 M160.404 265.206 C 160.404 265.656,160.180 265.880,159.730 265.880 C 159.062 265.880,159.056 266.105,159.056 295.535 C 159.056 324.965,159.062 325.190,159.730 325.190 C 160.180 325.190,160.404 325.414,160.404 325.864 C 160.404 326.532,160.629 326.537,190.059 326.537 C 219.489 326.537,219.714 326.532,219.714 325.864 C 219.714 325.414,219.938 325.190,220.388 325.190 C 221.054 325.190,221.061 324.965,221.061 306.150 C 221.061 287.335,221.054 287.110,220.388 287.110 C 219.938 287.110,219.714 286.886,219.714 286.436 C 219.714 285.778,219.489 285.762,209.773 285.762 L 199.832 285.762 199.832 275.821 C 199.832 267.210,199.764 265.880,199.326 265.880 C 199.045 265.880,198.821 265.581,198.821 265.206 C 198.821 264.540,198.596 264.532,179.612 264.532 C 160.629 264.532,160.404 264.540,160.404 265.206 M371.019 265.206 C 371.019 265.656,370.795 265.880,370.345 265.880 C 369.687 265.880,369.671 266.105,369.671 275.821 L 369.671 285.762 359.899 285.762 C 350.351 285.762,350.126 285.778,350.126 286.436 C 350.126 286.886,349.902 287.110,349.452 287.110 C 348.786 287.110,348.778 287.335,348.778 306.150 C 348.778 324.965,348.786 325.190,349.452 325.190 C 349.902 325.190,350.126 325.414,350.126 325.864 C 350.126 326.531,350.351 326.537,375.063 326.537 L 400.000 326.537 400.000 295.535 L 400.000 264.532 385.510 264.532 C 371.244 264.532,371.019 264.543,371.019 265.206 M223.757 286.436 C 223.757 286.886,223.533 287.110,223.083 287.110 C 222.417 287.110,222.409 287.335,222.409 306.150 C 222.409 324.965,222.417 325.190,223.083 325.190 C 223.533 325.190,223.757 325.414,223.757 325.864 C 223.757 326.532,223.982 326.537,253.243 326.537 C 282.505 326.537,282.730 326.532,282.730 325.864 C 282.730 325.414,282.954 325.190,283.404 325.190 C 284.070 325.190,284.078 324.965,284.078 306.150 C 284.078 287.335,284.070 287.110,283.404 287.110 C 282.954 287.110,282.730 286.886,282.730 286.436 C 282.730 285.768,282.505 285.762,253.243 285.762 C 223.982 285.762,223.757 285.768,223.757 286.436 M286.773 286.436 C 286.773 286.886,286.549 287.110,286.099 287.110 C 285.433 287.110,285.425 287.335,285.425 306.150 C 285.425 324.965,285.433 325.190,286.099 325.190 C 286.549 325.190,286.773 325.414,286.773 325.864 C 286.773 326.532,286.998 326.537,316.428 326.537 C 345.858 326.537,346.083 326.532,346.083 325.864 C 346.083 325.414,346.307 325.190,346.757 325.190 C 347.423 325.190,347.430 324.965,347.430 306.150 C 347.430 287.335,347.423 287.110,346.757 287.110 C 346.307 287.110,346.083 286.886,346.083 286.436 C 346.083 285.768,345.858 285.762,316.428 285.762 C 286.998 285.762,286.773 285.768,286.773 286.436 " stroke="none" fill="#3c4444" fill-rule="evenodd"></path><path id="path1" d="" stroke="none" fill="#404444" fill-rule="evenodd"></path><path id="path2" d="" stroke="none" fill="#404444" fill-rule="evenodd"></path><path id="path3" d="" stroke="none" fill="#404444" fill-rule="evenodd"></path><path id="path4" d="" stroke="none" fill="#404444" fill-rule="evenodd"></path></g></svg>`;
            view.set({
                label: 'Remove Section',
                icon: toremove,
                tooltip: true,
                class: 'remove-section-btn ck-disabled',
            });

            // Insert a text into the editor after clicking the button.
            this.listenTo(view, 'execute', () => {
                editor.execute('removeAccordion');
            });

            return view;
        });
    }

    removeAccordion() {
        // const editor = this.editor;
        // editor.model.change((writer) => {
        //   const accordionElement = insertAccordionElement(writer); // Updated utility function
        //   editor.model.insertContent(accordionElement);
        // });
        // editor.editing.view.focus();
    }
}
