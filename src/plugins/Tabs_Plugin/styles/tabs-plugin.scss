// Padding variables
$tab-x-padding: 1.5rem;
$tab-y-padding: 1.75rem;

// Margin variables
$tab-x-margin: 0.75rem;
$tab-y-margin: 1.25rem;

// Border variables
$tab-border-radius: 0.5rem;
$tab-border-color: #ddd;
$tab-border-color-active: #ccc;
$tab-border-width: 2px;

// Background-color variables
$tab-bg: #eee;
$tab-bg-hover: #f7f7f7;
$tab-bg-active: #fff;

$transition-speed: 200ms ease-in-out;

// Main tabs plugin container
// .tabs-plugin {
.tabcontainer {
    background-color: $tab-bg-active;

    // Tab list container
    // .tab-list {
    .tab {
        align-items: stretch;
        display: flex;
        flex-wrap: wrap;
        list-style: none;
        margin: 0;
        padding: 0;

        // Individual tab list item
        // .tab-list-item {
        .yui3-tab {
            background-color: $tab-bg;
            border-radius: $tab-border-radius $tab-border-radius 0 0;
            border: $tab-border-width solid $tab-border-color;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            max-width: 20rem;
            min-height: 5.625rem;
            min-width: 10rem;
            padding: 0;
            position: relative;
            transition: background-color $transition-speed, border-color $transition-speed;
            z-index: 5;

            &::after {
                background-color: $tab-bg;
                bottom: -#{$tab-border-width};
                content: '';
                display: block;
                height: $tab-border-width;
                left: 0;
                position: absolute;
                transition: background-color $transition-speed;
                width: 100%;
                z-index: 3;
            }
            &:hover {
                background-color: $tab-bg-hover;

                &::after {
                    background-color: $tab-bg-hover;
                }
            }
            &.active,
            &.active:hover,
            &.yui3-tab-selected,
            &.yui3-tab-selected:hover {
                background-color: $tab-bg-active;
                border: $tab-border-width solid $tab-border-color-active;
                position: relative;

                &::after {
                    background-color: $tab-bg-active;
                    bottom: -#{calc($tab-border-width * 2)};
                    height: calc($tab-border-width * 2);
                }
            }
            // Editing buttons container
            .tab-edit-bar {
                align-items: center;
                display: flex;
                flex: 1 1 0;

                .move-buttons-wrapper {
                    display: flex;
                    flex: 1 1 0;
                    justify-content: space-between;
                }
            }
            // Title of the tab
            // .tab-title {
            .tabTitle {
                align-items: center;
                display: flex;
                font-weight: 700;
                justify-content: center;
                margin: $tab-x-margin $tab-y-margin;
                min-width: 6rem;
                position: relative;
                text-align: center;
                word-break: break-word;
            }
            // Align the 'right-arrow' left and hide the 'left-arrow' for the first tab
            &:first-child .tab-edit-bar > .move-buttons-wrapper {
                justify-content: flex-end;

                .left-arrow {
                    // .move-left-button {
                    display: none;
                }
            }
            // Align the 'left-arrow' left and hide the 'right-arrow' for the last tab
            &:nth-last-child(2) .tab-edit-bar > .move-buttons-wrapper {
                justify-content: flex-start;

                // .move-right-button
                .right-arrow {
                    display: none;
                }
            }
            // Hide the 'tab-edit-bar' if only one tab is visible
            &:nth-last-child(2):first-child {
                .tab-edit-bar {
                    display: none;
                }
                .tabTitle {
                    margin: $tab-x-margin $tab-y-margin;
                }
            }
            .arrowtabicon,
            .dropicon {
                align-items: center;
                background-color: orange;
                display: flex;
                height: 2.5rem;
                justify-content: center;
                width: 2.5rem;
            }
            .dropicon {
                background-color: #00ffff;
            }
        } // Container for the add tab button
        // .add-tab-list-item {
        .yui3-tab.addtab {
            align-self: flex-end;
            padding: 0;

            // .add-tab-button,
            .addicon {
                padding: $tab-x-padding $tab-y-padding;
            }
        }
    }

    // Content of the tabs
    // .tab-content {
    .yui3-tabview-panel {
        background-color: $tab-bg-active;
        border: $tab-border-width solid $tab-border-color-active;
        position: relative;

        // .tab-nested-content {
        .tabcontent {
            display: none;
            height: 100%;
            min-height: 5.75rem;
            width: 100%;

            &.active,
            &.yui3-tab-panel-selected {
                // Add fallback for active on first-child
                // &:nth-last-child(3):first-child {
                display: block;
                padding: 1rem;
            }
        }
    }
}

// Individual buttons (add, delete, move-left, move-right)
.addicon {
    // .dropicon,
    // .left-arrow,
    // .right-arrow {
    background-color: transparent;
    border: 0;
    cursor: pointer;
    padding: 0.5rem;
    transition: background-image $transition-speed;

    &::before,
    &:hover::before {
        background-repeat: no-repeat;
        background-size: cover;
        content: '';
        display: block;
        height: 1rem;
        transition: background-image $transition-speed;
        width: 1rem;
    }
    span {
        align-items: center;
        display: none;
    }
}

// Move left button
.left-arrow {
    background-image: url("data:image/svg+xml,%3Csvg enable-background='new 0 0 24 24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m23 13.6h-16l5.5 5.5-2.2 2.2-9.3-9.3 9.3-9.3 2.2 2.2-5.5 5.5h16z' fill='#333333'/%3E%3C/svg%3E");
    &:hover {
        background-image: url("data:image/svg+xml,%3Csvg enable-background='new 0 0 24 24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m23 13.6h-16l5.5 5.5-2.2 2.2-9.3-9.3 9.3-9.3 2.2 2.2-5.5 5.5h16z' fill='#266de2'/%3E%3C/svg%3E");
    }
}

// Move right button
.right-arrow {
    background-image: url("data:image/svg+xml,%3Csvg enable-background='new 0 0 24 24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m1 13.6h16l-5.5 5.5 2.2 2.2 9.3-9.3-9.3-9.3-2.2 2.2 5.5 5.5h-16z' fill='#333333'/%3E%3C/svg%3E");
    &:hover {
        background-image: url("data:image/svg+xml,%3Csvg enable-background='new 0 0 24 24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m1 13.6h16l-5.5 5.5 2.2 2.2 9.3-9.3-9.3-9.3-2.2 2.2 5.5 5.5h-16z' fill='#266de2'/%3E%3C/svg%3E");
    }
}

// Delete tab button
.dropicon {
    &::before {
        background-image: url("data:image/svg+xml,%3Csvg enable-background='new 0 0 24 24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m12 1c-6.1 0-11 4.9-11 11s4.9 11 11 11 11-4.9 11-11-4.9-11-11-11zm4.4 13.8-1.6 1.6-2.8-2.8-2.8 2.8-1.6-1.6 2.8-2.8-2.8-2.8 1.6-1.6 2.8 2.8 2.8-2.8 1.6 1.6-2.8 2.8z' fill='#333333'/%3E%3C/svg%3E");
    }
    &:hover::before {
        background-image: url("data:image/svg+xml,%3Csvg enable-background='new 0 0 24 24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m12 1c-6.1 0-11 4.9-11 11s4.9 11 11 11 11-4.9 11-11-4.9-11-11-11zm4.4 13.8-1.6 1.6-2.8-2.8-2.8 2.8-1.6-1.6 2.8-2.8-2.8-2.8 1.6-1.6 2.8 2.8 2.8-2.8 1.6 1.6-2.8 2.8z' fill='#ff0000'/%3E%3C/svg%3E");
    }
}

// Add tab button
.addicon {
    &::before {
        background-image: url("data:image/svg+xml,%3Csvg enable-background='new 0 0 24 24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m23 9h-8v-8h-6v8h-8v6h8v8h6v-8h8z' fill='#333333'/%3E%3C/svg%3E");
    }
    &:hover::before {
        background-image: url("data:image/svg+xml,%3Csvg enable-background='new 0 0 24 24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m23 9h-8v-8h-6v8h-8v6h8v8h6v-8h8z' fill='#266de2'/%3E%3C/svg%3E");
    }
}

// Hide outline on elements when selected in the editor
.tab,
.yui3-tab,
.tab-edit-bar,
.left-arrow,
.right-arrow,
.dropicon,
.addicon,
.yui3-tabview-panel,
.tabcontent {
    &.ck-widget.ck-widget_selected {
        outline: none !important;
    }

    .ck.ck-reset_all.ck-widget__type-around {
        display: none !important;
    }
}

.tab,
.yui3-tab,
.tab-edit-bar,
.tabTitle,
.left-arrow,
.right-arrow,
.dropicon,
.addicon,
.yui3-tabview-panel,
.tabcontent {
    .ck-widget,
    .ck-widget:hover {
        transition: none;
    }

    .ck-widget:hover,
    &.ck-widget.ck-widget_selected {
        outline: none;
    }

    .ck-widget {
        &.ck-widget_selected {
            > .ck-widget__type-around > .ck-widget__type-around__button {
                &:before,
                &:after {
                    display: none;
                }
            }
        }
        > .ck-widget__type-around > .ck-widget__type-around__button {
            &:hover:before,
            &:hover:after {
                display: none;
            }
        }

        &.ck-widget_selected,
        &.ck-widget_selected:hover {
            outline: none;
        }
    }
}

// Remove outline on blurred editor
.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,
.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover {
    .tab,
    .yui3-tab,
    .tab-edit-bar,
    .tabTitle,
    .left-arrow,
    .right-arrow,
    .dropicon,
    .addicon,
    .yui3-tabview-panel,
    .tabcontent {
        outline: none;
    }
}

.yui3-tabview-panel.ck-widget:hover {
    outline: none !important;
}

// Set the z-index higher than the tabs for type-around buttons
.ck.ck-widget__type-around__button.ck-widget__type-around__button_before,
.ck.ck-widget__type-around__button.ck-widget__type-around__button_after {
    z-index: 1001;
}

// remove the before/after arrows to insert plugin
// .ck-widget__type-around {
//   display: none;
// }

// Placeholder styling for nested content in the editor
.ck-content .tabcontent.ck-placeholder::before {
    content: attr(data-placeholder);
    color: #999;
    font-style: italic;
    pointer-events: none;
}

//// NEW CSS
.tabcontainer.yui3-widget {
    .ah-tabs-horizontal.ah-responsiveselecttabs.ah-content-space-v.yui3-ah-responsiveselecttabs-content.yui3-tabview-content {
        .tabheader.ah-tabs-horizontal {
            ul.tab.yui3-tabview-list {
                li.yui3-tab.yui3-tab-selected.tablinks {
                    .yui3-tab-label {
                        table {
                            thead > tr > th {
                                .left-arrow.arrowtabicon {
                                }
                                .right-arrow.arrowtabicon {
                                }
                                .dropicon > .droptab.droptabicon {
                                }
                            }
                            tbody > tr > td > .tabTitle {
                            }
                        }
                    }
                }
                li.yui3-tab.tablinks {
                    .yui3-tab-label {
                        table {
                            thead > tr > th {
                                .left-arrow.arrowtabicon {
                                }
                                .right-arrow.arrowtabicon {
                                }
                                .dropicon > .droptab.droptabicon {
                                }
                            }
                            tbody > tr > td > .tabTitle {
                            }
                        }
                    }
                }
                li.yui3-tab.addtab {
                    .addicon > .addtabicon {
                    }
                }
            }
            .yui3-tabview-panel {
                .yui3-tab-panel.yui3-tab-panel-selected.tabcontent {
                }
                .yui3-tab-panel.tabcontent {
                }
            }
        }
    }
}

table {
    border: 1px solid red !important;
}
